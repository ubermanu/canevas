/*! silk.js 2016-02-20 */
var SILK={VERSION:"0"};SILK.Camera=function(a){a=a||{},this.type="Camera",this.position=void 0!==a.position?a.position:new SILK.Vector2,this.rotation=void 0!==a.rotation?a.rotation:0,this.zoom=void 0!==a.zoom?a.zoom:1},SILK.Canvas=function(){console.log("SILK.Canvas",SILK.VERSION);var a=document.createElement("canvas"),b=a.getContext("2d");this.domElement=a,this.context=null,this.autoClear=!0,this.setSize=function(b,c){a.width=b,a.height=c,a.style.width=b+"px",a.style.height=c+"px"},this.clear=function(){b.clearRect(0,0,a.width,a.height)},this.render=function(a,c){if(!(a instanceof SILK.Scene))return void console.error("SILK.Canvas.render: scene is not an instance of SILK.Scene",a);if(!(c instanceof SILK.Camera))return void console.error("SILK.Canvas.render: camera is not an instance of SILK.Camera",c);1==this.autoClear&&this.clear(),b.save(),b.translate(c.position.x,c.position.y),b.rotate(c.rotation);for(var d=0;d<a.children.length;d++)a.children[d].render(b);b.restore()}},SILK.Object2D=function(a){Object.defineProperty(this,"id",{value:SILK.Object2DIdCount++}),a=a||{},this.type="Object2D",this.parent=null,this.position=void 0!==a.position?a.position:new SILK.Vector2,this.rotation=void 0!==a.rotation?a.rotation:0,this.scale=void 0!==a.scale?a.scale:1,this.visible=void 0!==a.visible?a.visible:!0,this.wireframe=void 0!==a.wireframe?a.wireframe:!1;var b=void 0!==a.color?a.color:0;this.color=new SILK.Color(b)},SILK.Object2D.prototype={constructor:SILK.Object2D,render:function(a){this.visible&&(this.rotation>2*Math.PI&&(this.rotation=0),a.save(),a.scale(this.scale,this.scale),a.translate(this.position.x,this.position.y),a.rotate(this.rotation))}},SILK.Object2DIdCount=0,SILK.Scene=function(){this.children=[],this.add=function(a){return a instanceof SILK.Object2D?(null!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a)):console.error("SILK.Canvas.add: object is not an instance of SILK.Object2D",a),this},this.remove=function(a){var b=this.children.indexOf(a);-1!==b&&(a.parent=null,this.children.splice(b,1))}},SILK.Color=function(a){return this.setHex(a)},SILK.Color.prototype={constructor:SILK.Color,r:1,g:1,b:1,setHex:function(a){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,this},setRGB:function(a,b,c){return this.r=a,this.g=b,this.b=c,this},getStyle:function(){var a=255*this.r|0,b=255*this.g|0,c=255*this.b|0;return"rgb("+a+","+b+","+c+")"}},SILK.Vector2=function(a,b){return this.x=a||0,this.y=b||0,this},SILK.Vector2.prototype={constructor:SILK.Vector2,set:function(a,b){return this.x=a,this.y=b,this},copy:function(a){return this.x=a.x,this.y=a.y,this},clone:function(){return new SILK.Vector2(this.x,this.y)},add:function(a){return this.x+=a.x,this.y+=a.y,this},addScalar:function(a){return this.x+=a,this.y+=a,this},sub:function(a){return this.x-=a.x,this.y-=a.y,this},subScalar:function(a){return this.x-=a,this.y-=a,this},mult:function(a){return this.x*=a.x,this.y*=a.y,this},multScalar:function(a){return this.x*=a,this.y*=a,this},div:function(a){return this.x/=a.x,this.y/=a.y,this},divScalar:function(a){return 0==a?new SILK.Vector2:(this.x/=a,this.y/=a,this)},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divScalar(this.length())},limit:function(a){return this.length()>a&&(this.normalize(),this.multScalar(a)),this},distanceTo:function(a){return Math.sqrt(this.distanceToSq(a))},distanceToSq:function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c}},SILK.Circle=function(a){SILK.Object2D.call(this,a),a=a||{},this.radius=void 0!==a.radius?a.radius:0},SILK.Circle.prototype=Object.create(SILK.Object2D.prototype),SILK.Circle.prototype.constructor=SILK.Circle,SILK.Circle.prototype.render=function(a){SILK.Object2D.prototype.render.call(this,a),a.beginPath(),a.arc(0,0,this.radius,0,2*Math.PI),this.wireframe?(a.strokeStyle=this.color.getStyle(),a.stroke()):(a.fillStyle=this.color.getStyle(),a.fill()),a.restore()},SILK.Rect=function(a){SILK.Object2D.call(this,a),a=a||{},this.width=void 0!==a.width?a.width:0,this.height=void 0!==a.height?a.height:0},SILK.Rect.prototype=Object.create(SILK.Object2D.prototype),SILK.Rect.prototype.constructor=SILK.Rect,SILK.Rect.prototype.render=function(a){SILK.Object2D.prototype.render.call(this,a);var b=-this.width/2,c=-this.height/2,d=this.width,e=this.height;this.wireframe?(a.strokeStyle=this.color.getStyle(),a.strokeRect(b,c,d,e)):(a.fillStyle=this.color.getStyle(),a.fillRect(b,c,d,e)),a.restore()},SILK.Triangle=function(a){SILK.Object2D.call(this,a),a=a||{},this.radius=void 0!==a.radius?a.radius:0},SILK.Triangle.prototype=Object.create(SILK.Object2D.prototype),SILK.Triangle.prototype.constructor=SILK.Triangle,SILK.Triangle.prototype.render=function(a){SILK.Object2D.prototype.render.call(this,a);var b=Math.PI/180,c=new SILK.Vector2(Math.cos(30*b),Math.sin(30*b)).multScalar(this.radius),d=new SILK.Vector2(Math.cos(150*b),Math.sin(150*b)).multScalar(this.radius),e=new SILK.Vector2(Math.cos(270*b),Math.sin(270*b)).multScalar(this.radius);a.beginPath(),a.moveTo(c.x,c.y),a.lineTo(d.x,d.y),a.lineTo(e.x,e.y),a.closePath(),this.wireframe?(a.strokeStyle=this.color.getStyle(),a.stroke()):(a.fillStyle=this.color.getStyle(),a.fill()),a.restore()};